# 8. 페이지별 레이아웃 설정하기

### ※ 개별 페이지에 레이아웃을 별도로 적용하는 방법
① 검색이 가능한 레이아웃 컴포넌트를 만든다.
- 페이지 컴포넌트를 받기 위해 children이라는 props를 설정
```tsx
// /src/components/searchable-layout.tsx

import { useEffect, useState } from 'react'
import { useRouter } from 'next/router';
import styles from '@/components/searchable-layout.module.css';

export default function SearchableLayout({ children }: { children: React.ReactNode }) {
  const router = useRouter();
  const [search, setSearch] = useState('');

  const q = router.query.q as string;

  const onChangeSearch = (e: React.ChangeEvent<HTMLInputElement>) => {
    setSearch(e.target.value);
  }

  const onSubmit = () => {
    if (!search || q === search) return;
    router.push(`/search?q=${search}`);
  }

  const onKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (e.key === 'Enter') {
      onSubmit();
    }
  }

  useEffect(() => {
    setSearch(q || "");
  }, [q]);

  return (
    <div>
      <div className={styles.searchbar_container}>
        <input
          type="text"
          placeholder="검색어를 입력하세요..."
          value={search}
          onChange={onChangeSearch}
          onKeyDown={onKeyDown}
        />
        <button type="button" onClick={onSubmit}>검색</button>
      </div>
      {children}
    </div>
  )
}
```

② 특정 페이지에만 적용할 경우
- 예&#41; index페이지에 적용
```tsx
// /src/pages/index.tsx

import SearchableLayout from '@/components/searchable-layout';
import styles from './index.module.css';

export default function Home() {
  return (
    <div className={styles.container}>Home</div>
  )
}

Home.getLayout = (page: React.ReactNode) => {
  return <SearchableLayout>{page}</SearchableLayout>
};
```
- Home에 getLayout 메서드 호출
- page 컴포넌트를 page라는 매개변수로 받아서 SearchableLayout레이아웃으로 감싸서 리턴
- 하지만, Home함수에 어떻게 저렇게 쓸까? <br />
  → 자바스크립트의 모든 함수는 `객체`이기 때문에 메서드를 추가할 수 있다.

③ _app 컴포넌트
```tsx
import "@/styles/globals.css";
import type { AppProps } from "next/app";
import GlobalLayout from "@/components/global-layout";
import { NextPage } from 'next';

type NextPageWithLayout = NextPage & {
  getLayout?: (page: React.ReactNode) => React.ReactNode;
}

export default function App({ Component, pageProps }: AppProps & { Component: NextPageWithLayout }) {
  console.log(Component.getLayout);
  // 예) index.tsx에 Home컴포넌트의 getLayout이라는 메서드로 설저한 앱 컴포넌트가 전달하여 출력
  const getLayout = Component.getLayout ?? ((page: React.ReactNode) => page);
  // Component.getLayout이 undefined일 땐 page를 그냥 return

  return (
    <GlobalLayout>
      {getLayout(<Component {...pageProps} />)}
    </GlobalLayout>
  )
}
```